sudo: required
language: python
python:
  - 2.7
install:
  - "./install-dependencies.sh"
  - "tpip=$(which pip)"
  - "$tpip install -r requirements.txt"
before_script: 
  - ls .
  - curl https://gist.github.com/santiycr/5139565/raw/sauce_connect_setup.sh | bash
script:
  - python testsite/manage.py makemigrations
  - python testsite/manage.py migrate
addons:
  sauce_connect:
    username: test-travisci-sauce
  jwt:
    secure: YE/mxT6BIe6RrgzDwylXit3uW0us4lAu465Yh4x2eEAWtAa6rUkOuJQ7YgUnvY1nGlVLroFIZVU+PkCIWZ8+q55evqwNqwzmi9rEa5VhC3eY/tzavHeZ0+N4PIPwTjv+dwDXLZWaY8YfsFkAijHkRxJdCQoumJrwnFitX51gwsTVBNisQmqQ3/3hNZnqeBEVPG3oSdEslvXDvZFG+4vob8eeOMM1k3/sOhrNajvDl/MX27yJKC+T012dph472x9hdKUiCKLQgspUqejkegxgQDARp4/YCoreUWgkh8f2RVmS+oWlAorD8PX0eb2uhX1fOc7uX8qTWlsdM4zRGYwNqaHfjkJRx6FwNZz0Nvctw4nXIpLD8K7x5JTGNxu2vPoraMF7POdTIToaTT7Yt3SflbgKc9l8RVJFVvy0h1+egjfLeDKCANYRrUVj/aKxSpFHcmdP0xMK4ZWTQTZORQ7xVBP1cPLLdFtWhMHMp6zFs3J0QEvasU76q6HYee4ZyhYOs3oyT686rmnoS3qlpOMglMocc3c2dXuX/M8o1zG3oyCmKmAVmUcyB090MonXmj0M5iteimzg97Op/zJW56JlFnys2YhT8zKTQlpQqzNqFiCc2Bm6HmqolD+ZmhCRUTrtqZdOcvg2VeC+7iNo1k4VhY2XOyUbdR3VCEi3gzH9AFQ=
deploy:
  skip_cleanup: true
  provider: heroku
  api_key:
    secure: gWgzt6v+3SE6WL031EfCVFk+gg00CDVfTfbY+oaRnK52y5cKYWFVOF8hUYvdbREu7xrrBPIcPJXHqBA8fh+WXyQG5LHVCr+Hk8HfnhqmPvhLVLsST/B0vDL6C29v1/muTor18MaoZgAEAX/SasjNQCwZOm9cznDooQXBiPzRm9R3bxcDztyXTAT7DfT7MUyqYlm1wosFBvxNZP9yUjlNtAhiDydNmDIw5QSOyutAKYT6fb6/9MVDUPMLVZ1Fz6D5Z2Hp/mn2KQoOBnbY/URBz+IuuxS3GJh8WADo9xuhbNQKiPd8XHmiSnR6PnhpVcfkQknUVGIbBOKNtCO8n3+JuA0cztGC4BO5EXNcKm7/nITkcI2+2tqEUT7dLcLspk5q+xYftAIDl9HXflqwWvIwQxPfrNNg+XkX9C0czXuI6gZtZIrpJPgpF3qn/2tC0MePbl2EO2RBsj8XfGhcNNnnCcnxfxlxWSiXOjmAJmez2EF58SM7PPAZdFxIFRWSTvpSYpSDxhnV8NlpBvN+3BYehXcykyXBKmK69NJvFHH7+NtFVxgHbl/6aI5AlLat6JdVTSqV8tiAfiqdwSJ2Wmq1TLlWgZyMX88t6vFEhNGfa/DGzhvrzweeHJsPEniaormLjmRUjnrsCQ2lL/tNxHDIiAMgDxZv10EdkZfacv+uGVg=
  on: 
    branch: master
  app: test-travisci-heroku
  run:
    - "tpython=$(which python)"
    - "$tpython testsite/manage.py makemigrations"
    - "$tpython testsite/manage.py migrate"
    - restart
#    - "$tpython testsite/manage.py runserver"
after_deploy: 
  run:
    - "git clone -b selenium https://github.com/swenghj/test-travisci-sourcelab.git"
    - ls .
    - "cd selenium/automation"
    - "python test-saucelabs.py"

